class ImageMesh extends THREE.Mesh{constructor(t,e,n=1){super(t,e),this.hovered=!1,this.selected=!1,this.up=!1,this.tweening=!1,this.position0=new THREE.Vector3,this.rotation0=new THREE.Vector3,this.quaternion0=new THREE.Quaternion,this.scale0=new THREE.Vector3,this.tweens=[],this.ratio=n}cancelTweens(){this.tweens.forEach(((t,e)=>{t.stop(),this.tweens.splice(e,1)}))}liftUp(){this.tweening=!0,this.cancelTweens();const t=new TWEEN.Tween(this.position).to({y:this.position0.y+.1},200).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!0,this.tweening=!1}));t.start(),this.tweens.push(t)}putBack(t=200){console.log("putting back"),this.tweening=!0,this.cancelTweens();const e=new TWEEN.Tween(this.position).to({x:this.position0.x,y:this.position0.y,z:this.position0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));e.start(),this.tweens.push(e);const n={t:0},s=new TWEEN.Tween(n).to({t:1},500).easing(TWEEN.Easing.Linear.None).onStart((()=>{this.tweening=!0})).onUpdate((()=>{this.quaternion.slerp(this.quaternion0,n.t)})).onComplete((()=>{this.up=!1,this.quaternion.copy(this.quaternion0),this.selected=!1,this.tweening=!1}));this.tweens.push(s),s.start();const i=new TWEEN.Tween(this.scale).to({x:this.scale0.x,y:this.scale0.y,z:this.scale0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));i.start(),this.tweens.push(i)}putSelectedBack(t=800){this.tweening=!0,this.material[5].transparent=!1,this.renderOrder=0,this.material[5].depthTest=!0,this.cancelTweens();const e=new TWEEN.Tween(this.position).to({x:this.position0.x,y:this.position0.y,z:this.position0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));e.start(),this.tweens.push(e),this.quaternion.angleTo(this.quaternion0)>=Math.PI/2&&this.rotateY(Math.PI);const n={t:0},s=new TWEEN.Tween(n).to({t:1},500).easing(TWEEN.Easing.Linear.None).onStart((()=>{this.tweening=!0})).onUpdate((()=>{this.quaternion.slerp(this.quaternion0,n.t)})).onComplete((()=>{this.up=!1,this.selected=!1,this.tweening=!1}));s.start(),this.tweens.push(s);const i=new TWEEN.Tween(this.scale).to({x:this.scale0.x,y:this.scale0.y,z:this.scale0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));i.start(),this.tweens.push(i)}bringToFocus(t,e,n){this.material[5].transparent=!0,this.renderOrder=1,this.material[5].depthTest=!1,this.cancelTweens(),this.tweening=!0;const s=new TWEEN.Tween(this.position).to({x:0,y:t.position.y-.09-e,z:t.position.z-.09-e},500).easing(TWEEN.Easing.Quadratic.InOut).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.tweening=!1}));s.start(),this.tweens.push(s),this.ratio>1&&(n/=this.ratio),console.log(this.rotation.toVector3().angleTo(this.rotation0)),this.quaternion.angleTo(this.quaternion0)>=Math.PI/2&&this.rotateY(Math.PI);const i={t:0},o=new TWEEN.Tween(i).to({t:1},500).easing(TWEEN.Easing.Exponential.In).onStart((()=>{this.tweening=!0})).onUpdate((()=>{this.quaternion.slerp(t.quaternion,i.t)})).onComplete((()=>{this.tweening=!1,this.quaternion.copy(t.quaternion)}));o.start(),this.tweens.push(o);const a=new TWEEN.Tween(this.scale).to({x:n,y:n,z:n},500).easing(TWEEN.Easing.Quadratic.InOut).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.tweening=!1}));a.start(),this.tweens.push(a)}}