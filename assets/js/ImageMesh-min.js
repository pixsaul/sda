class ImageMesh extends THREE.Mesh{constructor(t,e){super(t,e),this.hovered=!1,this.selected=!1,this.up=!1,this.tweening=!1,this.position0=new THREE.Vector3,this.rotation0=new THREE.Vector3,this.quaternion0=new THREE.Quaternion,this.scale0=new THREE.Vector3,this.tweens=[]}cancelTweens(){this.tweens.forEach(((t,e)=>{t.stop(),this.tweens.splice(e,1)}))}liftUp(){this.tweening=!0,this.cancelTweens();const t=new TWEEN.Tween(this.position).to({y:this.position0.y+.1},200).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!0,this.tweening=!1}));t.start(),this.tweens.push(t)}putBack(t=200){console.log("putting back"),this.tweening=!0,this.cancelTweens();const e=new TWEEN.Tween(this.position).to({x:this.position0.x,y:this.position0.y,z:this.position0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));e.start(),this.tweens.push(e);const n={t:0},s=new TWEEN.Tween(n).to({t:1},500).easing(TWEEN.Easing.Linear.None).onStart((()=>{this.tweening=!0})).onUpdate((()=>{this.quaternion.slerp(this.quaternion0,n.t)})).onComplete((()=>{this.up=!1,this.quaternion.copy(this.quaternion0),this.selected=!1,this.tweening=!1}));this.tweens.push(s),s.start();const i=new TWEEN.Tween(this.scale).to({x:this.scale0.x,y:this.scale0.y,z:this.scale0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));i.start(),this.tweens.push(i)}putSelectedBack(t=800){this.tweening=!0,this.cancelTweens();const e=new TWEEN.Tween(this.position).to({x:this.position0.x,y:this.position0.y,z:this.position0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));e.start(),this.tweens.push(e),this.quaternion.angleTo(this.quaternion0)>=Math.PI/2&&this.rotateY(Math.PI);const n={t:0},s=new TWEEN.Tween(n).to({t:1},500).easing(TWEEN.Easing.Linear.None).onStart((()=>{this.tweening=!0})).onUpdate((()=>{this.quaternion.slerp(this.quaternion0,n.t)})).onComplete((()=>{this.up=!1,this.selected=!1,this.tweening=!1}));s.start(),this.tweens.push(s);const i=new TWEEN.Tween(this.scale).to({x:this.scale0.x,y:this.scale0.y,z:this.scale0.z},t).easing(TWEEN.Easing.Quadratic.Out).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.up=!1,this.tweening=!1}));i.start(),this.tweens.push(i)}bringToFocus(t,e){this.cancelTweens(),this.tweening=!0;const n=new TWEEN.Tween(this.position).to({x:0,y:t.position.y-e,z:t.position.z-e},500).easing(TWEEN.Easing.Quadratic.InOut).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.tweening=!1}));n.start(),this.tweens.push(n),console.log(this.rotation.toVector3().angleTo(this.rotation0)),this.quaternion.angleTo(this.quaternion0)>=Math.PI/2&&this.rotateY(Math.PI);const s={t:0},i=new TWEEN.Tween(s).to({t:1},500).easing(TWEEN.Easing.Exponential.In).onStart((()=>{this.tweening=!0})).onUpdate((()=>{this.quaternion.slerp(t.quaternion,s.t)})).onComplete((()=>{this.tweening=!1,this.quaternion.copy(t.quaternion)}));i.start(),this.tweens.push(i);const o=new TWEEN.Tween(this.scale).to({x:1,y:1,z:1},500).easing(TWEEN.Easing.Quadratic.InOut).onStart((()=>{this.tweening=!0})).onComplete((()=>{this.tweening=!1}));o.start(),this.tweens.push(o)}}